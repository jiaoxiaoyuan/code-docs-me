import{_ as s,c as e,o as i,a3 as a}from"./chunks/framework.qnZckW2M.js";const g=JSON.parse('{"title":"HTTP CSP å†…å®¹å®‰å…¨ç­–ç•¥","description":"","frontmatter":{"nav":{"title":"è®¡ç®—æœºç½‘ç»œ","order":8},"group":{"title":"HTTP","order":3},"title":"HTTP CSP å†…å®¹å®‰å…¨ç­–ç•¥","order":16},"headers":[],"relativePath":"KnowledgeBase/FrontEnd/JavaScript/computer-networks/http/HTTP CSP å†…å®¹å®‰å…¨ç­–ç•¥.md","filePath":"KnowledgeBase/FrontEnd/JavaScript/computer-networks/http/HTTP CSP å†…å®¹å®‰å…¨ç­–ç•¥.md","lastUpdated":1719742520000}'),t={name:"KnowledgeBase/FrontEnd/JavaScript/computer-networks/http/HTTP CSP å†…å®¹å®‰å…¨ç­–ç•¥.md"},n=a(`<h1 id="http-csp-å†…å®¹å®‰å…¨ç­–ç•¥" tabindex="-1">HTTP CSP å†…å®¹å®‰å…¨ç­–ç•¥ <a class="header-anchor" href="#http-csp-å†…å®¹å®‰å…¨ç­–ç•¥" aria-label="Permalink to &quot;HTTP CSP å†…å®¹å®‰å…¨ç­–ç•¥&quot;">â€‹</a></h1><p>å†…å®¹å®‰å…¨ç­–ç•¥ (CSP) æ˜¯ä¸€ä¸ªé¢å¤–çš„å®‰å…¨å±‚ï¼Œç”¨äºæ£€æµ‹å¹¶å‰Šå¼±æŸäº›ç‰¹å®šç±»å‹çš„æ”»å‡»ï¼ŒåŒ…æ‹¬è·¨ç«™è„šæœ¬ (XSS) å’Œæ•°æ®æ³¨å…¥æ”»å‡»ç­‰ã€‚æ— è®ºæ˜¯æ•°æ®ç›—å–ã€ç½‘ç«™å†…å®¹æ±¡æŸ“è¿˜æ˜¯æ•£å‘æ¶æ„è½¯ä»¶ï¼Œè¿™äº›æ”»å‡»éƒ½æ˜¯ä¸»è¦çš„æ‰‹æ®µã€‚</p><p>CSP æ˜¯ä¸€ç§ç”±å¼€å‘è€…å®šä¹‰çš„å®‰å…¨æ€§æ”¿ç­–æ€§ç”³æ˜ï¼Œé€šè¿‡ CSP æ‰€çº¦æŸçš„è§„åˆ™æŒ‡å®šå¯ä¿¡çš„å†…å®¹æ¥æºï¼ˆè¿™é‡Œçš„å†…å®¹å¯ä»¥æŒ‡è„šæœ¬ã€å›¾ç‰‡ã€<code>iframe</code>ã€<code>font</code>ã€<code>style</code> ç­‰ç­‰å¯èƒ½çš„è¿œç¨‹çš„èµ„æºï¼‰ã€‚é€šè¿‡ CSP åå®šï¼Œè®© Web å¤„äºä¸€ä¸ªå®‰å…¨çš„è¿è¡Œç¯å¢ƒä¸­ã€‚</p><p>ä¸ºä½¿ CSP å¯ç”¨ï¼Œéœ€è¦é…ç½®ç½‘ç»œæœåŠ¡å™¨è¿”å› <code>Content-Security-Policy</code> HTTP å¤´éƒ¨ã€‚</p><p>é™¤æ­¤ä¹‹å¤–ï¼Œ<code>&lt;meta&gt;</code> å…ƒç´ ä¹Ÿå¯ä»¥ç”¨äºé…ç½®è¯¥ç­–ç•¥ï¼š</p><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">meta</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> http-equiv</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Content-Security-Policy&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="æŒ‡ä»¤é€‰é¡¹" tabindex="-1">æŒ‡ä»¤é€‰é¡¹ <a class="header-anchor" href="#æŒ‡ä»¤é€‰é¡¹" aria-label="Permalink to &quot;æŒ‡ä»¤é€‰é¡¹&quot;">â€‹</a></h2><h3 id="èµ„æºåŠ è½½æŒ‡ä»¤" tabindex="-1">èµ„æºåŠ è½½æŒ‡ä»¤ <a class="header-anchor" href="#èµ„æºåŠ è½½æŒ‡ä»¤" aria-label="Permalink to &quot;èµ„æºåŠ è½½æŒ‡ä»¤&quot;">â€‹</a></h3><p>é€šè¿‡è·å–æŒ‡ä»¤æ¥æ§åˆ¶æŸäº›å¯èƒ½è¢«åŠ è½½çš„ç¡®åˆ‡çš„èµ„æºç±»å‹çš„ä½ç½®ï¼š</p><p>CSP ç­–ç•¥åœ¨é»˜è®¤çš„æƒ…å†µä¸‹æ˜¯ä¸å…è®¸ä½¿ç”¨ <code>data URIs</code> èµ„æºçš„ï¼Œå¦‚æœè¦ä½¿ç”¨ï¼Œé‚£ä¹ˆéœ€è¦æ˜¾ç¤ºçš„æŒ‡å®šï¼š</p><ul><li><code>script-src</code>ï¼šåœ¨å¤„ç†è„šæœ¬èµ„æºçš„æ—¶å€™è®¾ç½® <code>unsafe-inline</code> å¯ä»¥é˜»æ­¢å†…è” Js ä»£ç çš„æ‰§è¡Œï¼Œä½¿ç”¨ <code>unsafe-eval</code> å¼€å…³å¯ä»¥ç¦æ­¢ <code>eval</code>ã€<code>setTimeout</code>ã€<code>setInterval</code> å‡½æ•°çš„æ‰§è¡Œ</li><li><code>style-src</code>ï¼šä¼šæ§åˆ¶æ ·å¼è¡¨@import å’Œ rel æ—¶æ‰€å¼•å…¥çš„ URI èµ„æºï¼Œè®¾ç½® unsafe-inline è§„åˆ™å¯ä»¥æ˜¯æµè§ˆå™¨æ‹’ç»è§£æå†…éƒ¨æ ·å¼å’Œå†…è”æ ·å¼å®šä¹‰ã€‚å¹¶ä¸ä¼šé˜»æ­¢é“¾å…¥å¤–éƒ¨æ ·å¼è¡¨ã€‚</li><li><code>img-src</code>ï¼šå¯ä»¥æ§åˆ¶å›¾ç‰‡èµ„æºçš„è¿æ¥ï¼ŒåŒ…æ‹¬ <code>img</code> æ ‡ç­¾çš„ <code>src</code> å±æ€§ï¼Œä»¥åŠ CSS3 ä¸­çš„ <code>url()</code> å’Œ <code>image()</code> æ–¹æ³•ï¼Œä»¥åŠ <code>link</code> æ ‡ç­¾ä¸­çš„ <code>href</code> å±æ€§ï¼ˆå½“ <code>rel</code> è®¾ç½®æˆä¸å›¾åƒç›¸å…³çš„å€¼ï¼Œæ¯”å¦‚ HTML æ”¯æŒçš„ iconï¼‰</li><li><code>font-src</code>ï¼šæ§åˆ¶ CSS ä¸­çš„ <code>@font-face</code> åŠ è½½çš„å­—ä½“æºåœ°å€</li><li><code>frame-src</code>ï¼šè®¾ç½®å…è®¸é€šè¿‡ç±»ä¼¼ <code>&lt;frame&gt;</code> å’Œ <code>&lt;iframe&gt;</code> æ ‡ç­¾åŠ è½½çš„å†…åµŒå†…å®¹çš„æºåœ°å€</li><li><code>manifest-src</code>ï¼šé™åˆ¶åº”ç”¨å£°æ˜æ–‡ä»¶çš„æºåœ°å€</li><li><code>media-src</code>ï¼šæ§åˆ¶åª’ä½“ç±»å‹çš„å¤–éƒ¨é“¾å…¥èµ„æºï¼Œå¦‚ <code>&lt;audio&gt;</code>ã€<code>&lt;video&gt;</code>ã€<code>&lt;source&gt;</code> å’Œ <code>&lt;track&gt;</code> æ ‡ç­¾çš„ <code>src</code> å±æ€§</li><li><code>object-src</code>ï¼šæ§åˆ¶ <code>&lt;embed&gt;</code>ã€<code>&lt;code&gt;</code>ã€<code>&lt;archive&gt;</code>ã€<code>&lt;applet&gt;</code> ç­‰å¯¹è±¡</li><li><code>prefetch-src</code>ï¼šæŒ‡å®šé¢„åŠ è½½æˆ–é¢„æ¸²æŸ“çš„å…è®¸æºåœ°å€</li><li><code>connect-src</code>ï¼šæ§åˆ¶ XMLHttpRequest ä¸­çš„ <code>open()</code>ã€WebSocketã€EventSource</li></ul><p>å¦å¤– <code>inline script</code> å’Œ <code>eval</code> ç±»å‹å‡½æ•°ï¼ˆåŒ…æ‹¬ <code>eval</code>ã€<code>setInterval</code>ã€<code>setTimeout</code> å’Œ <code>new Function()</code>ï¼‰ä¹Ÿæ˜¯ä¸è¢«æ‰§è¡Œçš„ã€‚</p><h3 id="default-src" tabindex="-1">default-src <a class="header-anchor" href="#default-src" aria-label="Permalink to &quot;default-src&quot;">â€‹</a></h3><p><code>default-src</code> ç”¨äºè®¾ç½®ä¸Šé¢å„ä¸ªé€‰é¡¹çš„é»˜è®¤å€¼ã€‚</p><div class="language-http vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">Content-Security-Policy</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> default-src &#39;self&#39;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>ä¸Šé¢ä»£ç é™åˆ¶æ‰€æœ‰å¤–éƒ¨èµ„æºï¼Œåªèƒ½ä»å½“å‰æ¸”æ°‘è¯¥åŠ è½½ã€‚</p><p>å¦‚æœåŒæ—¶è®¾ç½®æŸä¸ªå•é¡¹é™åˆ¶ï¼ˆæ¯”å¦‚ <code>font-src</code>ï¼‰å’Œ <code>default-src</code>ï¼Œå‰è€…ä¼šè¦†ç›–åè€…ï¼Œå³å­—ä½“æ–‡ä»¶ä¼šé‡‡ç”¨ <code>font-src</code> çš„å€¼ï¼Œå…¶ä»–èµ„æºä¾ç„¶é‡‡ç”¨ <code>default-src</code> çš„å€¼ã€‚</p><h3 id="å…¶ä»–é™åˆ¶" tabindex="-1">å…¶ä»–é™åˆ¶ <a class="header-anchor" href="#å…¶ä»–é™åˆ¶" aria-label="Permalink to &quot;å…¶ä»–é™åˆ¶&quot;">â€‹</a></h3><p>å…¶ä»–ä¸€äº›å®‰å…¨ç›¸å…³çš„åŠŸèƒ½ï¼Œä¹Ÿæ”¾åœ¨äº† CSP é‡Œé¢ï¼š</p><ul><li><code>block-all-mixed-content</code>ï¼šHTTPS ç½‘é¡µä¸å¾—åŠ è½½ HTTP èµ„æºï¼ˆæµè§ˆå™¨å·²ç»é»˜è®¤å¼€å¯ï¼‰</li><li><code>upgrade-insecure-requests</code>ï¼šè‡ªåŠ¨å°†ç½‘é¡µä¸Šæ‰€æœ‰åŠ è½½å¤–éƒ¨èµ„æºçš„ HTTP é“¾æ¥æ¢æˆ HTTPS åè®®</li><li><code>plugin-types</code>ï¼šé™åˆ¶å¯ä»¥ä½¿ç”¨çš„æ’ä»¶æ ¼å¼</li><li><code>sandbox</code>ï¼šæµè§ˆå™¨è¡Œä¸ºçš„é™åˆ¶ï¼Œæ¯”å¦‚ä¸èƒ½æœ‰å¼¹å‡ºçª—å£ç­‰ã€‚</li></ul><h3 id="report-uri" tabindex="-1">report-uri <a class="header-anchor" href="#report-uri" aria-label="Permalink to &quot;report-uri&quot;">â€‹</a></h3><p>æœ‰æ—¶ï¼Œæˆ‘ä»¬ä¸ä»…å¸Œæœ›é˜²æ­¢ XSSï¼Œè¿˜å¸Œæœ›è®°å½•æ­¤ç±»è¡Œä¸ºã€‚<code>report-uri</code> å°±ç”¨æ¥å‘Šè¯‰æµè§ˆå™¨ï¼Œåº”è¯¥æŠŠæ³¨å…¥è¡Œä¸ºæŠ¥å‘Šç»™å“ªä¸ªç½‘å€ã€‚</p><div class="language-http vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">Content-Security-Policy</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> default-src &#39;self&#39;; ...; report-uri /my_amazing_csp_report_parser;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>ä¸Šé¢ä»£ç æŒ‡å®šï¼Œå°†æ³¨å…¥è¡Œä¸ºæŠ¥å‘Šç»™ <code>/my_amazing_csp_report_parser</code> è¿™ä¸ª URLã€‚</p><p>æµè§ˆå™¨ä¼šä½¿ç”¨ <code>POST</code> æ–¹æ³•ï¼Œå‘é€ä¸€ä¸ª <code>JSON</code> å¯¹è±¡ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚</p><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;csp-report&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;document-uri&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://example.org/page.html&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;referrer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://evil.example.com/&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;blocked-uri&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;http://evil.example.com/evil.js&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;violated-directive&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;script-src &#39;self&#39; https://apis.google.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;original-policy&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;script-src &#39;self&#39; https://apis.google.com; report-uri http://example.org/my_amazing_csp_report_parser&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="é€‰é¡¹å€¼" tabindex="-1">é€‰é¡¹å€¼ <a class="header-anchor" href="#é€‰é¡¹å€¼" aria-label="Permalink to &quot;é€‰é¡¹å€¼&quot;">â€‹</a></h2><p>æ¯ä¸ªé™åˆ¶é€‰é¡¹å¯ä»¥è®¾ç½®ä»¥ä¸‹å‡ ç§å€¼ï¼Œè¿™äº›å€¼å°±æ„æˆäº†ç™½åå•ã€‚</p><ul><li><strong>ä¸»æœºå</strong>ï¼š<code>example.org</code>ã€<code>https://example.com:443</code></li><li><strong>è·¯å¾„å</strong>ï¼š<code>example.org/resources/js/</code></li><li><strong>é€šé…ç¬¦</strong>ï¼š<code>*.example.org</code>ã€<code>*://*.example.com:*</code>ï¼ˆè¡¨ç¤ºä»»æ„åè®®ã€ä»»æ„å­åŸŸåã€ä»»æ„ç«¯å£ï¼‰</li><li><strong>åè®®å</strong>ï¼š<code>https:</code>ã€<code>data:</code></li><li><strong>å…³é”®å­— <code>&#39;self&#39;</code></strong>ï¼šå½“å‰åŸŸåï¼Œéœ€è¦åŠ å¼•å·</li><li><strong>å…³é”®å­— <code>&#39;none&#39;</code></strong>ï¼šç¦æ­¢åŠ è½½ä»»ä½•å¤–éƒ¨èµ„æºï¼Œéœ€è¦åŠ å¼•å·</li></ul><p>å¤šä¸ªå€¼ä¹Ÿå¯ä»¥å¹¶åˆ—ï¼Œç”¨ç©ºæ ¼åˆ†éš”ã€‚</p><div class="language-http vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">Content-Security-Policy</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> script-src &#39;self&#39; https://apis.google.com</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>å¦‚æœåŒä¸€ä¸ªé™åˆ¶é€‰é¡¹ä½¿ç”¨å¤šæ¬¡ï¼Œåªæœ‰ç¬¬ä¸€æ¬¡ä¼šç”Ÿæ•ˆã€‚</p><div class="language-http vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># é”™è¯¯çš„å†™æ³•</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">Content-Security-Policy</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> script-src https://host1.com; script-src https://host2.com</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># æ­£ç¡®çš„å†™æ³•</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">Content-Security-Policy</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> script-src https://host1.com https://host2.com</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="script-src-çš„ç‰¹æ®Šå€¼" tabindex="-1">script-src çš„ç‰¹æ®Šå€¼ <a class="header-anchor" href="#script-src-çš„ç‰¹æ®Šå€¼" aria-label="Permalink to &quot;script-src çš„ç‰¹æ®Šå€¼&quot;">â€‹</a></h2><p>é™¤äº†å¸¸è§„å€¼ï¼Œ<code>script-src</code> è¿˜å¯ä»¥è®¾ç½®ä¸€äº›ç‰¹æ®Šå€¼ã€‚æ³¨æ„ï¼Œä¸‹é¢è¿™äº›å€¼éƒ½å¿…é¡»æ”¾åœ¨å•å¼•å·é‡Œé¢ã€‚</p><ul><li><code>unsafe-inline</code>ï¼šå…è®¸æ‰§è¡Œé¡µé¢å†…åµŒçš„ <code>&amp;lt;script&gt;</code> æ ‡ç­¾å’Œäº‹ä»¶ç›‘å¬å‡½æ•°</li><li><code>unsafe-eval</code>ï¼šå…è®¸å°†å­—ç¬¦ä¸²å½“ä½œä»£ç æ‰§è¡Œï¼Œæ¯”å¦‚ä½¿ç”¨ <code>eval</code>ã€<code>setTimeout</code>ã€<code>setInterval</code> å’Œ <code>Function</code> ç­‰å‡½æ•°ã€‚</li><li><code>nonce</code> å€¼ï¼šæ¯æ¬¡ HTTP å›åº”ç»™å‡ºä¸€ä¸ªæˆæƒ tokenï¼Œé¡µé¢å†…åµŒè„šæœ¬å¿…é¡»æœ‰è¿™ä¸ª tokenï¼Œæ‰ä¼šæ‰§è¡Œ</li><li><code>hash</code> å€¼ï¼šåˆ—å‡ºå…è®¸æ‰§è¡Œçš„è„šæœ¬ä»£ç çš„ Hash å€¼ï¼Œé¡µé¢å†…åµŒè„šæœ¬çš„å“ˆå¸Œå€¼åªæœ‰å»åˆçš„æƒ…å†µä¸‹ï¼Œæ‰èƒ½æ‰§è¡Œã€‚</li></ul><p><code>nonce</code> å€¼çš„ä¾‹å­å¦‚ä¸‹ï¼ŒæœåŠ¡å™¨å‘é€ç½‘é¡µçš„æ—¶å€™ï¼Œå‘Šè¯‰æµè§ˆå™¨ä¸€ä¸ªéšæœºç”Ÿæˆçš„ <code>token</code>ã€‚</p><div class="language-http vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">Content-Security-Policy</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> script-src &#39;nonce-EDNnf03nceIOfn39fn3e9h3sdfa&#39;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>é¡µé¢å†…åµŒè„šæœ¬ï¼Œå¿…é¡»æœ‰è¿™ä¸ª token æ‰èƒ½æ‰§è¡Œã€‚</p><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> nonce</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;EDNnf03nceIOfn39fn3e9h3sdfa&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // some code</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><code>hash</code> å€¼çš„ä¾‹å­å¦‚ä¸‹ï¼ŒæœåŠ¡å™¨ç»™å‡ºä¸€ä¸ªå…è®¸æ‰§è¡Œçš„ä»£ç çš„ <code>hash</code> å€¼ã€‚</p><div class="language-http vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">Content-Security-Policy</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> script-src &#39;sha256-qznLcsROx4GACP2dm0UCKCzCG-HiZ1guq6ZZDob_Tng=&#39;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>ä¸‹é¢çš„ä»£ç å°±ä¼šå…è®¸æ‰§è¡Œï¼Œå› ä¸º hash å€¼ç›¸ç¬¦ã€‚</p><div class="language-html vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;text/javascript&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  alert</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Hello, world.&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>æ³¨æ„ï¼Œè®¡ç®— <code>hash</code> å€¼çš„æ—¶å€™ï¼Œ<code>&lt;script&gt;</code> æ ‡ç­¾ä¸ç®—åœ¨å†…ã€‚</p><p>é™¤äº† <code>script-src</code> é€‰é¡¹ï¼Œ<code>nonce</code> å€¼å’Œ <code>hash</code> å€¼è¿˜å¯ä»¥ç”¨åœ¨ <code>style-src</code> é€‰é¡¹ï¼Œæ§åˆ¶é¡µé¢å†…åµŒçš„æ ·å¼è¡¨ã€‚</p><h2 id="å‚è€ƒèµ„æ–™" tabindex="-1">å‚è€ƒèµ„æ–™ <a class="header-anchor" href="#å‚è€ƒèµ„æ–™" aria-label="Permalink to &quot;å‚è€ƒèµ„æ–™&quot;">â€‹</a></h2><ul><li><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/CSP" target="_blank" rel="noreferrer">ğŸ“– å†…å®¹å®‰å…¨ç­–ç•¥ï¼ˆCSPï¼‰</a></li><li><a href="http://www.ruanyifeng.com/blog/2016/09/csp.html" target="_blank" rel="noreferrer">ğŸ“ Content Security Policy å…¥é—¨æ•™ç¨‹</a></li><li><a href="https://www.zhihu.com/question/21979782" target="_blank" rel="noreferrer">ğŸ“ Content Security Policyï¼ˆCSPï¼‰æ˜¯ä»€ä¹ˆï¼Ÿä¸ºä»€ä¹ˆå®ƒèƒ½æŠµå¾¡ XSS æ”»å‡»ï¼Ÿ</a></li></ul>`,48),l=[n];function p(o,c,r,d,h,k){return i(),e("div",null,l)}const m=s(t,[["render",p]]);export{g as __pageData,m as default};
